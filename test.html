<!DOCTYPE html>
<html>
<head>
    <title>Runner Game</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link href="main.css" rel="stylesheet">
    <link href="map.css" rel="stylesheet">
    <style>
        .screen { display: none; }
        #mainMenu { display: block; }
        .level-btn { display: block; margin: 10px; padding: 10px; }
    </style>
</head>
<body>
    <div id="mainMenu" class="screen">
        <button id="playBtn" class="btn">ИГРАТЬ</button>
    </div>
    <div id="map" class="map">
        <img src="map.jpg" id="mapImage", class="image"/>
        <div id="firstLevelBtn" class="levelBtn" data-level="weather_hills"
            data-description="Первый уровень: Начальная локация для новичков."></div>
        <div id="secondLevelBtn" class="levelBtn" data-level="moria"
            data-description="Второй уровень: Увеличенная сложность."></div>
        <button id="backFromLevels" class="back-btn">← МЕНЮ</button>
        <div id="levelTooltip" class="level-tooltip">
            <div class="tooltip-content"></div>
        </div>
    </div>
    
    <div id="cutsceneScreen" class="screen">
        <video id="cutsceneVideo">
            <source src="cutscene1.mp4" type="video/mp4">
            <source src="cutscene2.mp4" type="video/mp4">
            <source src="cutscene3.mp4" type="video/mp4">
            Ваш браузер не поддерживает видео!
        </video>
        <div id="cutsceneControls">
            <button id="skip" class="btn">Пропустить</button>
        </div>
    </div>

    <div id="gameScreen" class="screen">
        <button id="backFromGame" class="back-btn">← МЕНЮ</button>
        <canvas id="gameCanvas"></canvas>
    </div>

    <button id="toggleControls" class="toggle-controls-btn">?</button>
    <div class="controls-info" id="controlsInfo">
        <h4>Управление</h4>
        <div class="control-item">
            <span class="key">Q</span>
            <span class="action">Стрельба</span>
        </div>
        <div class="control-item">
            <span class="key">W</span>
            <span class="action">Смена типа оружия</span>
        </div>
        <div class="control-item">
            <span class="key">E</span>
            <span class="action">Ускорение</span>
        </div>
        <div class="control-item">
            <span class="key">Пробел</span>
            <span class="action">Прыжок</span>
        </div>
    </div>

    <script src="map.js"></script>
    <script type="module" src="main.js"></script>

    <script>
        $(document).ready(function() {
            const controlsInfo = $('#controlsInfo');
            const toggleBtn = $('#toggleControls');

            controlsInfo.addClass('hidden');
            toggleBtn.click(function() {
                controlsInfo.toggleClass('hidden');
                if (controlsInfo.hasClass('hidden'))
                    toggleBtn.text("?");
                else
                    toggleBtn.text("x");
            });
        });
    </script>
</body>
</html>