<!DOCTYPE html>
<html>
<head>
    <title>Runner Game</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link href="main.css" rel="stylesheet">
    <link href="map.css" rel="stylesheet">
    <style>
        .screen { display: none; }
        #mainMenu { display: block; }
        .level-btn { display: block; margin: 10px; padding: 10px; }
    </style>
</head>
<body>
    <audio id="backgroundMusic" preload="auto" loop>
        <source src="media.mp3" type="audio/mpeg">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ!
    </audio>

    <div id="mainMenu" class="screen">
        <button id="playBtn" class="btn">–ò–ì–†–ê–¢–¨</button>
    </div>
    <div id="map" class="map">
        <img src="map.jpg" id="mapImage", class="image"/>
        <div id="firstLevelBtn" class="levelBtn" data-level="weather_hills"
            data-description="–ü–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: –ù–∞—á–∞–ª—å–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤."></div>
        <div id="secondLevelBtn" class="levelBtn" data-level="moria"
            data-description="–í—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å: –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å."></div>
        <button id="backFromLevels" class="back-btn">‚Üê –ú–ï–ù–Æ</button>
        <div id="levelTooltip" class="level-tooltip">
            <div class="tooltip-content"></div>
        </div>
    </div>
    
    <div id="cutsceneScreen" class="screen">
        <video id="cutsceneVideo">
            <source src="cutscene1.mp4" type="video/mp4">
            <source src="cutscene2.mp4" type="video/mp4">
            <source src="cutscene3.mp4" type="video/mp4">
            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ!
        </video>
        <div id="cutsceneControls">
            <button id="skip" class="btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
        </div>
    </div>

    <div id="gameScreen" class="screen">
        <button id="backFromGame" class="back-btn">‚Üê –ú–ï–ù–Æ</button>
        <canvas id="gameCanvas"></canvas>
    </div>

    <button id="toggleControls" class="toggle-controls-btn">?</button>
    <div class="controls-info" id="controlsInfo">
        <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h4>
        <div class="control-item">
            <span class="key">Q</span>
            <span class="action">–°—Ç—Ä–µ–ª—å–±–∞</span>
        </div>
        <div class="control-item">
            <span class="key">W</span>
            <span class="action">–°–º–µ–Ω–∞ —Ç–∏–ø–∞ –æ—Ä—É–∂–∏—è</span>
        </div>
        <div class="control-item">
            <span class="key">E</span>
            <span class="action">–£—Å–∫–æ—Ä–µ–Ω–∏–µ</span>
        </div>
        <div class="control-item">
            <span class="key">–ü—Ä–æ–±–µ–ª</span>
            <span class="action">–ü—Ä—ã–∂–æ–∫</span>
        </div>
    </div>

    <button id="musicToggle" class="music-toggle-btn">üîä</button>

    <script src="map.js"></script>
    <script type="module" src="main.js"></script>

    <script>
        $(document).ready(function() {
            const controlsInfo = $('#controlsInfo');
            const toggleBtn = $('#toggleControls');

            controlsInfo.addClass('hidden');
            toggleBtn.click(function() {
                controlsInfo.toggleClass('hidden');
                if (controlsInfo.hasClass('hidden'))
                    toggleBtn.text("?");
                else
                    toggleBtn.text("x");
            });
        });
    </script>
</body>
</html>